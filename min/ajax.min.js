Lapiz.Module("Ajax",["Collections","Events"],function(e){var a;if(window.XMLHttpRequest){a=function(){return new XMLHttpRequest()}}else{a=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}function b(g){var f=[];e.each(g,function(i,h){f.push(encodeURI(i)+"="+encodeURI(h))});return f.join("&")}function c(f,h,g){return function(){if(f.readyState==4&&f.status==200){if(g){h(JSON.parse(f.responseText))}else{h(f)}}}}function d(g,f){f=!!f;return function(j,k,l){var h=a();var i=typeof k;if(i==="function"&&l===undefined){l=k}else{if(i==="object"){j+="?"+b(k)}}if(typeof l==="function"){h.onreadystatechange=c(h,l,f)}h.open(g,j,true);h.send()}}e.Ajax={get:d("GET"),post:d("POST"),json:d("GET",true)}});