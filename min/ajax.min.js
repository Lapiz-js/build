Lapiz.Module("Ajax",["Collections","Events"],function(e){var a;if(window.XMLHttpRequest){a=function(){return new XMLHttpRequest()}}else{a=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}function b(g){var f=[];e.each(g,function(i,h){f.push(encodeURI(i)+"="+encodeURI(h))});return f.join("&")}function c(f,g){return function(){if(f.readyState==4&&f.status==200){g(f)}}}function d(i,h,g,l,k,j){var f=a();if(g!==undefined){if(h.indexOf("?")===-1){h+="?"}else{h+="&"}h+=b(data)}if(typeof k==="function"){f.onreadystatechange=c(f,k)}if(j!==undefined){Lapiz.each(j,function(m,n){f.setRequestHeader(m,n)})}f.open(i,h,true);f.send(l)}e.Ajax={Request:d,get:function(f,g,h){d("GET",f,g,undefined,h)},post:function(f,g,i,h){d("POST",f,g,undefined,i)},json:function(f,g,i,h){d("POST",f,g,undefined,function(j){i(JSON.parse(j.responseText))})}}});